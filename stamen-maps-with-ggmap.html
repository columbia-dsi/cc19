<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Stamen maps with ggmap | Community contributions for EDAV Fall 2019</title>
  <meta name="description" content="This book will hold all community contributions for STAT GR 5702 Fall 2019 at Columbia University" />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Stamen maps with ggmap | Community contributions for EDAV Fall 2019" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book will hold all community contributions for STAT GR 5702 Fall 2019 at Columbia University" />
  <meta name="github-repo" content="jtr13/cc19" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Stamen maps with ggmap | Community contributions for EDAV Fall 2019" />
  
  <meta name="twitter:description" content="This book will hold all community contributions for STAT GR 5702 Fall 2019 at Columbia University" />
  



<meta name="date" content="2019-10-29" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="ridgeline-plots.html"/>
<link rel="next" href="shiny.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/parallel-coordinates-2.1.8/parcoords.css" rel="stylesheet" />
<script src="libs/parcoords-binding-1.0.0/parcoords.js"></script>
<link href="libs/wordcloud2-0.0.1/wordcloud.css" rel="stylesheet" />
<script src="libs/wordcloud2-0.0.1/wordcloud2-all.js"></script>
<script src="libs/wordcloud2-0.0.1/hover.js"></script>
<script src="libs/wordcloud2-binding-0.2.1/wordcloud2.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html"><b>CC for EDAV 2019</b></a></li>

<li class="divider"></li>
<li class="part"><span><b>I Introduction</b></span></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Instructions</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#background"><i class="fa fa-check"></i><b>1.1</b> Background</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#preparing-your-.rmd-file"><i class="fa fa-check"></i><b>1.2</b> Preparing your <code>.Rmd</code> file</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#submission-steps"><i class="fa fa-check"></i><b>1.3</b> Submission Steps</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#optional-tweaks"><i class="fa fa-check"></i><b>1.4</b> Optional tweaks</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#faq"><i class="fa fa-check"></i><b>1.5</b> FAQ</a><ul>
<li class="chapter" data-level="1.5.1" data-path="index.html"><a href="index.html#what-should-i-expect-after-creating-a-pull-request"><i class="fa fa-check"></i><b>1.5.1</b> What should I expect after creating a pull request?</a></li>
<li class="chapter" data-level="1.5.2" data-path="index.html"><a href="index.html#what-if-i-catch-mistakes-after-my-pull-request-is-merged"><i class="fa fa-check"></i><b>1.5.2</b> What if I catch mistakes after my pull request is merged?</a></li>
<li class="chapter" data-level="1.5.3" data-path="index.html"><a href="index.html#other-questions"><i class="fa fa-check"></i><b>1.5.3</b> Other questions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="sample-project.html"><a href="sample-project.html"><i class="fa fa-check"></i><b>2</b> Sample project</a></li>
<li class="part"><span><b>II Static Graphs</b></span></li>
<li class="chapter" data-level="3" data-path="ridgeline-plots.html"><a href="ridgeline-plots.html"><i class="fa fa-check"></i><b>3</b> Ridgeline plots</a><ul>
<li class="chapter" data-level="3.1" data-path="ridgeline-plots.html"><a href="ridgeline-plots.html#overview"><i class="fa fa-check"></i><b>3.1</b> Overview</a></li>
<li class="chapter" data-level="3.2" data-path="ridgeline-plots.html"><a href="ridgeline-plots.html#tldr"><i class="fa fa-check"></i><b>3.2</b> tl;dr</a></li>
<li class="chapter" data-level="3.3" data-path="ridgeline-plots.html"><a href="ridgeline-plots.html#simple-examples"><i class="fa fa-check"></i><b>3.3</b> Simple examples</a></li>
<li class="chapter" data-level="3.4" data-path="ridgeline-plots.html"><a href="ridgeline-plots.html#theory"><i class="fa fa-check"></i><b>3.4</b> Theory</a></li>
<li class="chapter" data-level="3.5" data-path="ridgeline-plots.html"><a href="ridgeline-plots.html#external-resources"><i class="fa fa-check"></i><b>3.5</b> External resources</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="stamen-maps-with-ggmap.html"><a href="stamen-maps-with-ggmap.html"><i class="fa fa-check"></i><b>4</b> Stamen maps with ggmap</a><ul>
<li class="chapter" data-level="4.1" data-path="stamen-maps-with-ggmap.html"><a href="stamen-maps-with-ggmap.html#mutilayerd-plots-with-ggmaps"><i class="fa fa-check"></i><b>4.1</b> Mutilayerd plots with ggmaps</a></li>
<li class="chapter" data-level="4.2" data-path="stamen-maps-with-ggmap.html"><a href="stamen-maps-with-ggmap.html#getting-deeper"><i class="fa fa-check"></i><b>4.2</b> Getting Deeper</a></li>
</ul></li>
<li class="part"><span><b>III Interactive Graphs</b></span></li>
<li class="chapter" data-level="5" data-path="shiny.html"><a href="shiny.html"><i class="fa fa-check"></i><b>5</b> Shiny</a><ul>
<li class="chapter" data-level="5.1" data-path="shiny.html"><a href="shiny.html#part-1-how-to-build-a-shiny-app"><i class="fa fa-check"></i><b>5.1</b> Part 1 How to Build a Shiny App</a></li>
<li class="chapter" data-level="5.2" data-path="shiny.html"><a href="shiny.html#install-the-shiny-package"><i class="fa fa-check"></i><b>5.2</b> 1. Install the shiny package</a></li>
<li class="chapter" data-level="5.3" data-path="shiny.html"><a href="shiny.html#template-for-creating-a-shiny-app"><i class="fa fa-check"></i><b>5.3</b> 2. Template for creating a shiny app</a></li>
<li class="chapter" data-level="5.4" data-path="shiny.html"><a href="shiny.html#add-elements-to-user-interface-using-fluidpage"><i class="fa fa-check"></i><b>5.4</b> 3. Add elements to user interface using <code>fluidPage()</code></a><ul>
<li class="chapter" data-level="5.4.1" data-path="shiny.html"><a href="shiny.html#input-functions"><i class="fa fa-check"></i><b>5.4.1</b> Input functions</a></li>
<li class="chapter" data-level="5.4.2" data-path="shiny.html"><a href="shiny.html#output-functions"><i class="fa fa-check"></i><b>5.4.2</b> Output functions</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="shiny.html"><a href="shiny.html#build-output-in-server-instructions"><i class="fa fa-check"></i><b>5.5</b> 4. Build output in server instructions</a><ul>
<li class="chapter" data-level="5.5.1" data-path="shiny.html"><a href="shiny.html#save-objects-you-want-to-display-to-output"><i class="fa fa-check"></i><b>5.5.1</b> (1): Save objects you want to display to <code>output$</code></a></li>
<li class="chapter" data-level="5.5.2" data-path="shiny.html"><a href="shiny.html#build-objects-with-render"><i class="fa fa-check"></i><b>5.5.2</b> (2): Build objects with <code>render()</code></a></li>
<li class="chapter" data-level="5.5.3" data-path="shiny.html"><a href="shiny.html#use-input-values-with-input"><i class="fa fa-check"></i><b>5.5.3</b> (3): Use input values with <code>input$</code></a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="shiny.html"><a href="shiny.html#share-your-app"><i class="fa fa-check"></i><b>5.6</b> 5. Share your app</a><ul>
<li class="chapter" data-level="5.6.1" data-path="shiny.html"><a href="shiny.html#save-your-app"><i class="fa fa-check"></i><b>5.6.1</b> Save your app</a></li>
<li class="chapter" data-level="5.6.2" data-path="shiny.html"><a href="shiny.html#publish-your-app-on-shinyapps.io"><i class="fa fa-check"></i><b>5.6.2</b> Publish your app on Shinyapps.io</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="shiny.html"><a href="shiny.html#part-2-how-to-customize-reactions"><i class="fa fa-check"></i><b>5.7</b> Part 2 How to Customize Reactions</a></li>
<li class="chapter" data-level="5.8" data-path="shiny.html"><a href="shiny.html#reactivity"><i class="fa fa-check"></i><b>5.8</b> 1. Reactivity</a><ul>
<li class="chapter" data-level="5.8.1" data-path="shiny.html"><a href="shiny.html#what-is-reactivity"><i class="fa fa-check"></i><b>5.8.1</b> What is reactivity?</a></li>
<li class="chapter" data-level="5.8.2" data-path="shiny.html"><a href="shiny.html#reactive-values"><i class="fa fa-check"></i><b>5.8.2</b> Reactive values</a></li>
<li class="chapter" data-level="5.8.3" data-path="shiny.html"><a href="shiny.html#reactive-functions-reactive-toolkit"><i class="fa fa-check"></i><b>5.8.3</b> Reactive functions (reactive toolkit)</a></li>
<li class="chapter" data-level="5.8.4" data-path="shiny.html"><a href="shiny.html#modularize-code-with-reactive"><i class="fa fa-check"></i><b>5.8.4</b> Modularize code with <code>reactive()</code></a></li>
<li class="chapter" data-level="5.8.5" data-path="shiny.html"><a href="shiny.html#prevent-reactions-with-isolate"><i class="fa fa-check"></i><b>5.8.5</b> Prevent reactions with <code>isolate()</code></a></li>
<li class="chapter" data-level="5.8.6" data-path="shiny.html"><a href="shiny.html#trigger-code-with-observeevent"><i class="fa fa-check"></i><b>5.8.6</b> Trigger code with <code>observeEvent()</code></a></li>
<li class="chapter" data-level="5.8.7" data-path="shiny.html"><a href="shiny.html#delay-reactions-with-eventreactive"><i class="fa fa-check"></i><b>5.8.7</b> Delay reactions with <code>eventReactive()</code></a></li>
<li class="chapter" data-level="5.8.8" data-path="shiny.html"><a href="shiny.html#manage-state-with-reactivevalues"><i class="fa fa-check"></i><b>5.8.8</b> Manage state with <code>reactiveValues()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="shiny.html"><a href="shiny.html#summary"><i class="fa fa-check"></i><b>5.9</b> 3. Summary</a></li>
</ul></li>
<li class="part"><span><b>IV Other</b></span></li>
<li class="chapter" data-level="6" data-path="self-reflection-demographical-discoveries-using-tinder-data.html"><a href="self-reflection-demographical-discoveries-using-tinder-data.html"><i class="fa fa-check"></i><b>6</b> Self-Reflection &amp; Demographical Discoveries Using Tinder Data</a><ul>
<li class="chapter" data-level="6.1" data-path="self-reflection-demographical-discoveries-using-tinder-data.html"><a href="self-reflection-demographical-discoveries-using-tinder-data.html#introduction"><i class="fa fa-check"></i><b>6.1</b> Introduction</a><ul>
<li class="chapter" data-level="6.1.1" data-path="self-reflection-demographical-discoveries-using-tinder-data.html"><a href="self-reflection-demographical-discoveries-using-tinder-data.html#for-the-taken-non-millennial-folk"><i class="fa fa-check"></i><b>6.1.1</b> For The Taken / Non-Millennial Folk</a></li>
<li class="chapter" data-level="6.1.2" data-path="self-reflection-demographical-discoveries-using-tinder-data.html"><a href="self-reflection-demographical-discoveries-using-tinder-data.html#replicating-this-analysis-for-yourself"><i class="fa fa-check"></i><b>6.1.2</b> Replicating This Analysis For Yourself</a></li>
<li class="chapter" data-level="6.1.3" data-path="self-reflection-demographical-discoveries-using-tinder-data.html"><a href="self-reflection-demographical-discoveries-using-tinder-data.html#protecting-the-innocent-and-not-so-innocent"><i class="fa fa-check"></i><b>6.1.3</b> Protecting The Innocent (and Not-So-Innocent)</a></li>
<li class="chapter" data-level="6.1.4" data-path="self-reflection-demographical-discoveries-using-tinder-data.html"><a href="self-reflection-demographical-discoveries-using-tinder-data.html#a-fun-twist"><i class="fa fa-check"></i><b>6.1.4</b> A Fun Twist</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="self-reflection-demographical-discoveries-using-tinder-data.html"><a href="self-reflection-demographical-discoveries-using-tinder-data.html#analysis"><i class="fa fa-check"></i><b>6.2</b> Analysis</a><ul>
<li class="chapter" data-level="6.2.1" data-path="self-reflection-demographical-discoveries-using-tinder-data.html"><a href="self-reflection-demographical-discoveries-using-tinder-data.html#our-fun-new-tinder-statistics-amourmetrics"><i class="fa fa-check"></i><b>6.2.1</b> Our Fun New Tinder Statistics: “<em>Amourmetrics</em>”</a></li>
<li class="chapter" data-level="6.2.2" data-path="self-reflection-demographical-discoveries-using-tinder-data.html"><a href="self-reflection-demographical-discoveries-using-tinder-data.html#all-time-statistics-a-demographical-discovery"><i class="fa fa-check"></i><b>6.2.2</b> All-Time Statistics &amp; A Demographical Discovery</a></li>
<li class="chapter" data-level="6.2.3" data-path="self-reflection-demographical-discoveries-using-tinder-data.html"><a href="self-reflection-demographical-discoveries-using-tinder-data.html#its-like-batting-average-but-for-tinder"><i class="fa fa-check"></i><b>6.2.3</b> “It’s Like Batting Average, But For Tinder”</a></li>
<li class="chapter" data-level="6.2.4" data-path="self-reflection-demographical-discoveries-using-tinder-data.html"><a href="self-reflection-demographical-discoveries-using-tinder-data.html#where-when-did-my-swiping-habits-change"><i class="fa fa-check"></i><b>6.2.4</b> Where &amp; When Did My Swiping Habits Change?</a></li>
<li class="chapter" data-level="6.2.5" data-path="self-reflection-demographical-discoveries-using-tinder-data.html"><a href="self-reflection-demographical-discoveries-using-tinder-data.html#a-problem-with-dates"><i class="fa fa-check"></i><b>6.2.5</b> A Problem With Dates</a></li>
<li class="chapter" data-level="6.2.6" data-path="self-reflection-demographical-discoveries-using-tinder-data.html"><a href="self-reflection-demographical-discoveries-using-tinder-data.html#overall-trends"><i class="fa fa-check"></i><b>6.2.6</b> Overall Trends</a></li>
<li class="chapter" data-level="6.2.7" data-path="self-reflection-demographical-discoveries-using-tinder-data.html"><a href="self-reflection-demographical-discoveries-using-tinder-data.html#playing-hard-to-get"><i class="fa fa-check"></i><b>6.2.7</b> Playing Hard To Get</a></li>
<li class="chapter" data-level="6.2.8" data-path="self-reflection-demographical-discoveries-using-tinder-data.html"><a href="self-reflection-demographical-discoveries-using-tinder-data.html#playing-the-game"><i class="fa fa-check"></i><b>6.2.8</b> Playing The Game</a></li>
<li class="chapter" data-level="6.2.9" data-path="self-reflection-demographical-discoveries-using-tinder-data.html"><a href="self-reflection-demographical-discoveries-using-tinder-data.html#swipe-night-part-2"><i class="fa fa-check"></i><b>6.2.9</b> “Swipe Night, Part 2”</a></li>
<li class="chapter" data-level="6.2.10" data-path="self-reflection-demographical-discoveries-using-tinder-data.html"><a href="self-reflection-demographical-discoveries-using-tinder-data.html#for-my-fellow-data-nerds-or-people-who-just-like-graphs"><i class="fa fa-check"></i><b>6.2.10</b> For My Fellow Data Nerds, Or People Who Just Like Graphs</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="self-reflection-demographical-discoveries-using-tinder-data.html"><a href="self-reflection-demographical-discoveries-using-tinder-data.html#conclusion"><i class="fa fa-check"></i><b>6.3</b> Conclusion</a><ul>
<li class="chapter" data-level="6.3.1" data-path="self-reflection-demographical-discoveries-using-tinder-data.html"><a href="self-reflection-demographical-discoveries-using-tinder-data.html#dubious-demographics"><i class="fa fa-check"></i><b>6.3.1</b> Dubious Demographics</a></li>
<li class="chapter" data-level="6.3.2" data-path="self-reflection-demographical-discoveries-using-tinder-data.html"><a href="self-reflection-demographical-discoveries-using-tinder-data.html#love-is-bored"><i class="fa fa-check"></i><b>6.3.2</b> Love Is Bored</a></li>
<li class="chapter" data-level="6.3.3" data-path="self-reflection-demographical-discoveries-using-tinder-data.html"><a href="self-reflection-demographical-discoveries-using-tinder-data.html#does-location-matter-well-maybe."><i class="fa fa-check"></i><b>6.3.3</b> Does Location Matter? Well, Maybe.</a></li>
<li class="chapter" data-level="6.3.4" data-path="self-reflection-demographical-discoveries-using-tinder-data.html"><a href="self-reflection-demographical-discoveries-using-tinder-data.html#the-cinderella-effect"><i class="fa fa-check"></i><b>6.3.4</b> The Cinderella Effect</a></li>
<li class="chapter" data-level="6.3.5" data-path="self-reflection-demographical-discoveries-using-tinder-data.html"><a href="self-reflection-demographical-discoveries-using-tinder-data.html#playing-hard-to-get-may-a-be-real-thing"><i class="fa fa-check"></i><b>6.3.5</b> “Playing Hard To Get” May A Be Real Thing</a></li>
<li class="chapter" data-level="6.3.6" data-path="self-reflection-demographical-discoveries-using-tinder-data.html"><a href="self-reflection-demographical-discoveries-using-tinder-data.html#can-we-solve-dating-using-machine-learning"><i class="fa fa-check"></i><b>6.3.6</b> Can We Solve Dating Using Machine Learning?</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="self-reflection-demographical-discoveries-using-tinder-data.html"><a href="self-reflection-demographical-discoveries-using-tinder-data.html#final-thoughts"><i class="fa fa-check"></i><b>6.4</b> Final Thoughts</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="wordcloud-tutorial.html"><a href="wordcloud-tutorial.html"><i class="fa fa-check"></i><b>7</b> Wordcloud Tutorial</a><ul>
<li class="chapter" data-level="7.1" data-path="wordcloud-tutorial.html"><a href="wordcloud-tutorial.html#introduction-1"><i class="fa fa-check"></i><b>7.1</b> 1. Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="wordcloud-tutorial.html"><a href="wordcloud-tutorial.html#demo-of-wordcloud2-package"><i class="fa fa-check"></i><b>7.2</b> 2. Demo of <code>wordcloud2</code> Package</a><ul>
<li class="chapter" data-level="7.2.1" data-path="wordcloud-tutorial.html"><a href="wordcloud-tutorial.html#basic-wordcloud-graph"><i class="fa fa-check"></i><b>7.2.1</b> 2.0 Basic Wordcloud Graph</a></li>
<li class="chapter" data-level="7.2.2" data-path="wordcloud-tutorial.html"><a href="wordcloud-tutorial.html#font-size"><i class="fa fa-check"></i><b>7.2.2</b> 2.1 Font Size</a></li>
<li class="chapter" data-level="7.2.3" data-path="wordcloud-tutorial.html"><a href="wordcloud-tutorial.html#color-and-background-color"><i class="fa fa-check"></i><b>7.2.3</b> 2.2 Color and Background Color</a></li>
<li class="chapter" data-level="7.2.4" data-path="wordcloud-tutorial.html"><a href="wordcloud-tutorial.html#shape"><i class="fa fa-check"></i><b>7.2.4</b> 2.3 Shape</a></li>
<li class="chapter" data-level="7.2.5" data-path="wordcloud-tutorial.html"><a href="wordcloud-tutorial.html#rotation"><i class="fa fa-check"></i><b>7.2.5</b> 2.4 Rotation</a></li>
<li class="chapter" data-level="7.2.6" data-path="wordcloud-tutorial.html"><a href="wordcloud-tutorial.html#language"><i class="fa fa-check"></i><b>7.2.6</b> 2.5 Language</a></li>
<li class="chapter" data-level="7.2.7" data-path="wordcloud-tutorial.html"><a href="wordcloud-tutorial.html#customized-shape"><i class="fa fa-check"></i><b>7.2.7</b> 2.6 Customized shape</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>V Links</b></span></li>
<li class="chapter" data-level="8" data-path="workshops.html"><a href="workshops.html"><i class="fa fa-check"></i><b>8</b> Workshops</a><ul>
<li class="chapter" data-level="8.1" data-path="workshops.html"><a href="workshops.html#bookdown"><i class="fa fa-check"></i><b>8.1</b> bookdown</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="cheatsheets.html"><a href="cheatsheets.html"><i class="fa fa-check"></i><b>9</b> Cheatsheets</a><ul>
<li class="chapter" data-level="9.1" data-path="cheatsheets.html"><a href="cheatsheets.html#html-javascript-and-d3"><i class="fa fa-check"></i><b>9.1</b> HTML, JavaScript, and D3</a></li>
<li class="chapter" data-level="9.2" data-path="cheatsheets.html"><a href="cheatsheets.html#leaflet"><i class="fa fa-check"></i><b>9.2</b> Leaflet</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="videos.html"><a href="videos.html"><i class="fa fa-check"></i><b>10</b> Videos</a><ul>
<li class="chapter" data-level="10.1" data-path="videos.html"><a href="videos.html#cartodb"><i class="fa fa-check"></i><b>10.1</b> CartoDB</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="translation.html"><a href="translation.html"><i class="fa fa-check"></i><b>11</b> Translation</a><ul>
<li class="chapter" data-level="11.1" data-path="translation.html"><a href="translation.html#translation-for-r-ggplot2-visualization-tutorials"><i class="fa fa-check"></i><b>11.1</b> Translation for R &amp; ggplot2 visualization tutorials</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Community contributions for EDAV Fall 2019</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="stamen-maps-with-ggmap" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Stamen maps with ggmap</h1>
<p>Here is an example to get started with <code>ggmap</code> using <code>get_stamenmap()</code> to plot the longitude/latitude maps. The data for the following plots is available at <a href="https://simplemaps.com/data/us-cities" class="uri">https://simplemaps.com/data/us-cities</a>. The get_stamenmap() function reqiures a bounding box, i.e the top, bottom, left and right latitude/longitude of the map you want to plot. For example, the latitude/longitude for US map are as follows:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">bbox &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">bottom =</span> <span class="fl">25.75</span>, <span class="dt">top =</span> <span class="dv">49</span> , <span class="dt">right =</span> <span class="dv">-67</span>, <span class="dt">left =</span> <span class="dv">-125</span>)</a></code></pre></div>
<p>You can find these values from <a href="https://www.openstreetmap.org" class="uri">https://www.openstreetmap.org</a>. The other important parameters of this function are <code>zoom</code> and <code>maptype</code>. Higher the zoom level, the more detailed your plot will be. Beaware that ggmap connects to Stamen Map server to download the map, so if your bounding box is large and zoom level is high, it will have to download a lot of data and may take some time. There are differnt types of plots available via Stamen Map like terrain, watercolor, toner which can be set to maptype parameter according to your preference. You can find about avaiable options in help (<code>?get_stamenmap</code>). For the following examples the <code>maptype</code> is set to ‘toner-lite’.</p>
<p>Let’s plot the US map.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">library</span>(ggmap)</a>
<a class="sourceLine" id="cb13-2" data-line-number="2">usmap &lt;-<span class="st"> </span><span class="kw">get_stamenmap</span>(<span class="dt">bbox =</span> bbox, <span class="dt">zoom =</span> <span class="dv">6</span>, <span class="dt">maptype =</span> <span class="st">&#39;toner-lite&#39;</span>) </a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="kw">ggmap</span>(usmap)</a></code></pre></div>
<p><img src="cc19_files/figure-html/US_map-1.png" width="672" /></p>
<p>Great! We have the US map, now let’s use the US population data to see the population density across nation. Notice that we haven’t included Alaska in the map and hence will be removing the data from Alaska.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb14-2" data-line-number="2">df &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="kw">unz</span>(<span class="st">&#39;resources/ggmap/data/uscities.zip&#39;</span>, <span class="st">&#39;uscities.csv&#39;</span>))</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="co"># Removing data of Alaska from dataset</span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4">df &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(state_name <span class="op">!=</span><span class="st"> &#39;Alaska&#39;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co"># Population density across US using points</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="kw">ggmap</span>(usmap) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">data =</span> df, </a>
<a class="sourceLine" id="cb15-4" data-line-number="4">             <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> lng, <span class="dt">y =</span> lat, <span class="dt">color =</span> population)) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&#39;Population density across US&#39;</span>)</a></code></pre></div>
<p><img src="cc19_files/figure-html/points-1.png" width="672" /></p>
<p>This is not good! Most of the points are overlapping and thus it is not easy to interpret what’s going on here. Let’s try alpha blending.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="co"># Population density across US using points</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="kw">ggmap</span>(usmap) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">data =</span> df, </a>
<a class="sourceLine" id="cb16-4" data-line-number="4">             <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> lng, <span class="dt">y =</span> lat, <span class="dt">color =</span> population),</a>
<a class="sourceLine" id="cb16-5" data-line-number="5">             <span class="dt">stroke=</span> <span class="dv">0</span>, <span class="dt">alpha =</span> <span class="fl">0.1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&#39;Population density across US&#39;</span>)</a></code></pre></div>
<p><img src="cc19_files/figure-html/alpha-1.png" width="672" /></p>
<p>That’s much better! We can now easily identify the areas where population density is more. You might have noticed there is no light blue dot visible on the plot. This is because it must be lying somewhere between those dense areas. One such location is New York, you can find this out by zooming the plot.</p>
<hr />
<p>We can also look at popluation density using <code>geom_density</code> as follows</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="co"># Population density across US using Density_2d</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="kw">ggmap</span>(usmap) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_density_2d</span>(<span class="dt">data =</span> df, </a>
<a class="sourceLine" id="cb17-4" data-line-number="4">                  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> lng, <span class="dt">y =</span> lat, <span class="dt">color =</span> population)) <span class="op">+</span></a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&#39;Population density across US&#39;</span>)</a></code></pre></div>
<p><img src="cc19_files/figure-html/density-1.png" width="672" /></p>
<hr />
<div id="mutilayerd-plots-with-ggmaps" class="section level2">
<h2><span class="header-section-number">4.1</span> Mutilayerd plots with ggmaps</h2>
<p>We can add multiple layers to the plot as described in earlier chapters. Let’s look at the location of military stations located across US along with population density.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="co"># Location of Military units </span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2">df1 &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(military <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span>) </a>
<a class="sourceLine" id="cb18-3" data-line-number="3"></a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="kw">ggmap</span>(usmap) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">data =</span> df, </a>
<a class="sourceLine" id="cb18-6" data-line-number="6">             <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> lng, <span class="dt">y =</span> lat, <span class="dt">color =</span> population, <span class="dt">text =</span> city),</a>
<a class="sourceLine" id="cb18-7" data-line-number="7">             <span class="dt">show.legend =</span> F,</a>
<a class="sourceLine" id="cb18-8" data-line-number="8">             <span class="dt">stroke=</span> <span class="dv">0</span>, <span class="dt">alpha =</span> <span class="fl">0.1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb18-9" data-line-number="9"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">data =</span> df1, </a>
<a class="sourceLine" id="cb18-10" data-line-number="10">             <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> lng, <span class="dt">y =</span> lat , <span class="dt">text =</span> city), </a>
<a class="sourceLine" id="cb18-11" data-line-number="11">             <span class="dt">show.legend =</span> F,</a>
<a class="sourceLine" id="cb18-12" data-line-number="12">             <span class="dt">color =</span> <span class="st">&#39;red&#39;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-13" data-line-number="13"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&#39;Military stations across US&#39;</span>)</a></code></pre></div>
<p><img src="cc19_files/figure-html/multilayer-1.png" width="672" /></p>
<hr />
<p>Let’s zoom the map for state of California.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co"># California Boundaries</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2">CAbox &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">bottom =</span> <span class="fl">32.213</span>, <span class="dt">top =</span> <span class="fl">42.163</span> , <span class="dt">right =</span> <span class="fl">-113.95</span>, <span class="dt">left =</span> <span class="fl">-124.585</span>)</a>
<a class="sourceLine" id="cb19-3" data-line-number="3">camap &lt;-<span class="st"> </span><span class="kw">get_stamenmap</span>(<span class="dt">bbox =</span> CAbox, <span class="dt">zoom =</span> <span class="dv">6</span>, <span class="dt">maptype =</span> <span class="st">&#39;toner-lite&#39;</span>)</a>
<a class="sourceLine" id="cb19-4" data-line-number="4"></a>
<a class="sourceLine" id="cb19-5" data-line-number="5">df3 &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(state_name <span class="op">==</span><span class="st"> &#39;California&#39;</span>)</a>
<a class="sourceLine" id="cb19-6" data-line-number="6"></a>
<a class="sourceLine" id="cb19-7" data-line-number="7"><span class="kw">ggmap</span>(camap) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-8" data-line-number="8"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">data =</span> df3, </a>
<a class="sourceLine" id="cb19-9" data-line-number="9">             <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> lng, <span class="dt">y =</span> lat, <span class="dt">color =</span> population),</a>
<a class="sourceLine" id="cb19-10" data-line-number="10">             <span class="dt">stroke=</span> <span class="dv">0</span>, <span class="dt">alpha =</span> <span class="fl">0.1</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-11" data-line-number="11"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&#39;Population density for California&#39;</span>)</a></code></pre></div>
<p><img src="cc19_files/figure-html/CA-1.png" width="672" /></p>
<hr />
</div>
<div id="getting-deeper" class="section level2">
<h2><span class="header-section-number">4.2</span> Getting Deeper</h2>
<p>This was just a glimpse of what you can do with <code>ggmaps</code> using the <code>get_stamenmap()</code>. Note that Stamen Maps is not limited to US and can be used to plot any part of the world. If you liked this alternative to Google Maps API, I highly recommend you to check the Stamen Maps website <a href="http://maps.stamen.com" class="uri">http://maps.stamen.com</a> for more details.</p>

</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="ridgeline-plots.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="shiny.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jtr13/cc19/edit/master/maps.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
